<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>redis基础 | TypeScript4 文档</title>
    <meta name="generator" content="VuePress 1.9.10">
    
    <meta name="description" content="TypeScript4 最新官方文档翻译">
    
    <link rel="preload" href="/cyanyep/assets/css/0.styles.2cdd915d.css" as="style"><link rel="preload" href="/cyanyep/assets/js/app.3f4a4534.js" as="script"><link rel="preload" href="/cyanyep/assets/js/7.0ede3646.js" as="script"><link rel="preload" href="/cyanyep/assets/js/2.c489c8f7.js" as="script"><link rel="preload" href="/cyanyep/assets/js/1.79976f4a.js" as="script"><link rel="preload" href="/cyanyep/assets/js/69.d446987b.js" as="script"><link rel="prefetch" href="/cyanyep/assets/js/10.dce063a7.js"><link rel="prefetch" href="/cyanyep/assets/js/11.31d4ea08.js"><link rel="prefetch" href="/cyanyep/assets/js/14.c3299af5.js"><link rel="prefetch" href="/cyanyep/assets/js/15.3c0a27de.js"><link rel="prefetch" href="/cyanyep/assets/js/16.80a67b28.js"><link rel="prefetch" href="/cyanyep/assets/js/17.fc3f8d89.js"><link rel="prefetch" href="/cyanyep/assets/js/18.aa80efca.js"><link rel="prefetch" href="/cyanyep/assets/js/19.9e64c1c7.js"><link rel="prefetch" href="/cyanyep/assets/js/20.d0a31fe9.js"><link rel="prefetch" href="/cyanyep/assets/js/21.482a883f.js"><link rel="prefetch" href="/cyanyep/assets/js/22.57553a36.js"><link rel="prefetch" href="/cyanyep/assets/js/23.a96d2969.js"><link rel="prefetch" href="/cyanyep/assets/js/24.c6d09074.js"><link rel="prefetch" href="/cyanyep/assets/js/25.2c2205d4.js"><link rel="prefetch" href="/cyanyep/assets/js/26.b26c2088.js"><link rel="prefetch" href="/cyanyep/assets/js/27.05bdab6a.js"><link rel="prefetch" href="/cyanyep/assets/js/28.f646d797.js"><link rel="prefetch" href="/cyanyep/assets/js/29.1a82daf7.js"><link rel="prefetch" href="/cyanyep/assets/js/3.3956b71c.js"><link rel="prefetch" href="/cyanyep/assets/js/30.c0a32e3a.js"><link rel="prefetch" href="/cyanyep/assets/js/31.997fb7d8.js"><link rel="prefetch" href="/cyanyep/assets/js/32.eb18b99f.js"><link rel="prefetch" href="/cyanyep/assets/js/33.82b234f0.js"><link rel="prefetch" href="/cyanyep/assets/js/34.d98ca106.js"><link rel="prefetch" href="/cyanyep/assets/js/35.94d7e64b.js"><link rel="prefetch" href="/cyanyep/assets/js/36.1d891650.js"><link rel="prefetch" href="/cyanyep/assets/js/37.92b6a2b3.js"><link rel="prefetch" href="/cyanyep/assets/js/38.7653db5b.js"><link rel="prefetch" href="/cyanyep/assets/js/39.a3ab1dc0.js"><link rel="prefetch" href="/cyanyep/assets/js/4.5e014f3d.js"><link rel="prefetch" href="/cyanyep/assets/js/40.5f1bc0ac.js"><link rel="prefetch" href="/cyanyep/assets/js/41.aea27cae.js"><link rel="prefetch" href="/cyanyep/assets/js/42.792ff69c.js"><link rel="prefetch" href="/cyanyep/assets/js/43.ecfa023b.js"><link rel="prefetch" href="/cyanyep/assets/js/44.75b060b4.js"><link rel="prefetch" href="/cyanyep/assets/js/45.0b9db6b0.js"><link rel="prefetch" href="/cyanyep/assets/js/46.4a561d50.js"><link rel="prefetch" href="/cyanyep/assets/js/47.41f30abf.js"><link rel="prefetch" href="/cyanyep/assets/js/48.a6697c82.js"><link rel="prefetch" href="/cyanyep/assets/js/49.9d0aa9b3.js"><link rel="prefetch" href="/cyanyep/assets/js/5.d3f819d8.js"><link rel="prefetch" href="/cyanyep/assets/js/50.e45e9407.js"><link rel="prefetch" href="/cyanyep/assets/js/51.6e4df68c.js"><link rel="prefetch" href="/cyanyep/assets/js/52.2579795c.js"><link rel="prefetch" href="/cyanyep/assets/js/53.11867d73.js"><link rel="prefetch" href="/cyanyep/assets/js/54.24e5a745.js"><link rel="prefetch" href="/cyanyep/assets/js/55.a11e8203.js"><link rel="prefetch" href="/cyanyep/assets/js/56.d9799466.js"><link rel="prefetch" href="/cyanyep/assets/js/57.41ddbe32.js"><link rel="prefetch" href="/cyanyep/assets/js/58.44f310ed.js"><link rel="prefetch" href="/cyanyep/assets/js/59.840d95f5.js"><link rel="prefetch" href="/cyanyep/assets/js/6.dc212f51.js"><link rel="prefetch" href="/cyanyep/assets/js/60.05ee9ea9.js"><link rel="prefetch" href="/cyanyep/assets/js/61.e8a327e0.js"><link rel="prefetch" href="/cyanyep/assets/js/62.aefed2cc.js"><link rel="prefetch" href="/cyanyep/assets/js/63.662845b8.js"><link rel="prefetch" href="/cyanyep/assets/js/64.0fa84860.js"><link rel="prefetch" href="/cyanyep/assets/js/65.b791604b.js"><link rel="prefetch" href="/cyanyep/assets/js/66.07d03050.js"><link rel="prefetch" href="/cyanyep/assets/js/67.29f668d1.js"><link rel="prefetch" href="/cyanyep/assets/js/68.edaf9564.js"><link rel="prefetch" href="/cyanyep/assets/js/70.0c8c05d0.js"><link rel="prefetch" href="/cyanyep/assets/js/71.9bcf11d4.js"><link rel="prefetch" href="/cyanyep/assets/js/72.fbb1d1a2.js"><link rel="prefetch" href="/cyanyep/assets/js/73.a6f79400.js"><link rel="prefetch" href="/cyanyep/assets/js/74.049cac2d.js"><link rel="prefetch" href="/cyanyep/assets/js/75.3cb6680a.js"><link rel="prefetch" href="/cyanyep/assets/js/76.4ac28bd6.js"><link rel="prefetch" href="/cyanyep/assets/js/77.bece9a73.js"><link rel="prefetch" href="/cyanyep/assets/js/78.86a53d65.js"><link rel="prefetch" href="/cyanyep/assets/js/79.a9747c0f.js"><link rel="prefetch" href="/cyanyep/assets/js/8.3bb38af9.js"><link rel="prefetch" href="/cyanyep/assets/js/80.b00d1394.js"><link rel="prefetch" href="/cyanyep/assets/js/81.7187b640.js"><link rel="prefetch" href="/cyanyep/assets/js/82.68baff61.js"><link rel="prefetch" href="/cyanyep/assets/js/83.bf4c5e1f.js"><link rel="prefetch" href="/cyanyep/assets/js/84.0427418c.js"><link rel="prefetch" href="/cyanyep/assets/js/85.61d7f643.js"><link rel="prefetch" href="/cyanyep/assets/js/86.8a32f3ac.js"><link rel="prefetch" href="/cyanyep/assets/js/87.19701b90.js"><link rel="prefetch" href="/cyanyep/assets/js/9.ec79ecaa.js"><link rel="prefetch" href="/cyanyep/assets/js/vendors~docsearch.38a82bbe.js">
    <link rel="stylesheet" href="/cyanyep/assets/css/0.styles.2cdd915d.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container" data-v-7dd95ae2><div data-v-7dd95ae2><div class="password-shadow password-wrapper-out" style="display:none;" data-v-59e6cb88 data-v-7dd95ae2 data-v-7dd95ae2><h3 class="title" data-v-59e6cb88>TypeScript4 文档</h3> <p class="description" data-v-59e6cb88>TypeScript4 最新官方文档翻译</p> <label id="box" class="inputBox" data-v-59e6cb88><input type="password" value="" data-v-59e6cb88> <span data-v-59e6cb88>Konck! Knock!</span> <button data-v-59e6cb88>OK</button></label> <div class="footer" data-v-59e6cb88><span data-v-59e6cb88><i class="iconfont reco-theme" data-v-59e6cb88></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-59e6cb88>vuePress-theme-reco</a></span> <span data-v-59e6cb88><i class="iconfont reco-copyright" data-v-59e6cb88></i> <a data-v-59e6cb88><!---->
          
        <!---->
        2025
      </a></span></div></div> <div class="hide" data-v-7dd95ae2><header class="navbar" data-v-7dd95ae2><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/cyanyep/" class="home-link router-link-active"><!----> <span class="site-name">TypeScript4 文档</span></a> <div class="links"><div class="color-picker"><a class="color-button"><i class="iconfont reco-color"></i></a> <div class="color-picker-menu" style="display:none;"><div class="mode-options"><h4 class="title">Choose mode</h4> <ul class="color-mode-options"><li class="dark">dark</li><li class="auto active">auto</li><li class="light">light</li></ul></div></div></div> <div class="search-box"><i class="iconfont reco-search"></i> <input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/cyanyep/" class="nav-link"><i class="undefined"></i>
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="undefined"></i>
      西螈的 JavaScript 博客
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/rc4gyyc" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://blog.csdn.net/rc4gyyc" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  CSDN
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask" data-v-7dd95ae2></div> <aside class="sidebar" data-v-7dd95ae2><div class="personal-info-wrapper" data-v-1fad0c41 data-v-7dd95ae2><!----> <!----> <div class="num" data-v-1fad0c41><div data-v-1fad0c41><h3 data-v-1fad0c41>29</h3> <h6 data-v-1fad0c41>文章</h6></div> <div data-v-1fad0c41><h3 data-v-1fad0c41>0</h3> <h6 data-v-1fad0c41>标签</h6></div></div> <ul class="social-links" data-v-1fad0c41></ul> <hr data-v-1fad0c41></div> <nav class="nav-links"><div class="nav-item"><a href="/cyanyep/" class="nav-link"><i class="undefined"></i>
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="undefined"></i>
      西螈的 JavaScript 博客
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/rc4gyyc" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://blog.csdn.net/rc4gyyc" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  CSDN
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav> <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><a href="/cyanyep/" class="sidebar-heading clickable router-link-active"><span>欢迎学习</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/cyanyep/" aria-current="page" class="sidebar-link">学前必读</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/cyanyep/Blog/build" class="sidebar-heading clickable"><span>个人博客网站搭建</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/cyanyep/Blog/build.html" class="sidebar-link">搭建个人博客网站</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/cyanyep/SpringBoot/big-event" class="sidebar-heading clickable"><span>spring项目</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/cyanyep/SpringBoot/big-event.html" class="sidebar-link">大事件</a></li><li><a href="/cyanyep/SpringBoot/sky-take-out.html" class="sidebar-link">苍穹外卖</a></li><li><a href="/cyanyep/SpringBoot/sky-take-out2.html" class="sidebar-link">苍穹外卖</a></li><li><a href="/cyanyep/SpringBoot/Spring注解.html" class="sidebar-link">Spring注解</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/cyanyep/Redis/Redis基础" class="sidebar-heading clickable open active"><span>Redis</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/cyanyep/Redis/Redis基础.html" class="active sidebar-link">Redis基础</a></li><li><a href="/cyanyep/Redis/Redis安装说明.html" class="sidebar-link">Redis安装说明</a></li><li><a href="/cyanyep/Redis/Redis实战.html" class="sidebar-link">Redis实战</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/cyanyep/InterviewQ/INTV" class="sidebar-heading clickable"><span>面试题</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/cyanyep/InterviewQ/INTV.html" class="sidebar-link">场景题</a></li><li><a href="/cyanyep/InterviewQ/Java.html" class="sidebar-link">Java</a></li><li><a href="/cyanyep/InterviewQ/JUC.html" class="sidebar-link">JUC</a></li></ul></section></li></ul> </aside> <div class="password-shadow password-wrapper-in" style="display:none;" data-v-59e6cb88 data-v-7dd95ae2><h3 class="title" data-v-59e6cb88></h3> <!----> <label id="box" class="inputBox" data-v-59e6cb88><input type="password" value="" data-v-59e6cb88> <span data-v-59e6cb88>Konck! Knock!</span> <button data-v-59e6cb88>OK</button></label> <div class="footer" data-v-59e6cb88><span data-v-59e6cb88><i class="iconfont reco-theme" data-v-59e6cb88></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-59e6cb88>vuePress-theme-reco</a></span> <span data-v-59e6cb88><i class="iconfont reco-copyright" data-v-59e6cb88></i> <a data-v-59e6cb88><!---->
          
        <!---->
        2025
      </a></span></div></div> <div data-v-7dd95ae2><div data-v-7dd95ae2><main class="page"><section style="display:;"><div class="page-title"><h1 class="title">redis基础</h1> <div data-v-8a445198><!----> <!----> <!----> <!----></div></div> <div class="theme-reco-content content__default"><h1 id="redis基础"><a href="#redis基础" class="header-anchor">#</a> redis基础</h1> <p>环境准备</p> <ul><li>windows操作系统</li> <li>Mysql 5.7及以上版本</li> <li>VMware + CentOS7虚拟机</li> <li>JDK8</li> <li>IDEA开发工具</li></ul> <p>学习资料</p> <p><a href="https://pan.baidu.com/s/1189u6u4icQYHg_9_7ovWmA?from=init&amp;pwd=eh11#list/path=%2F" target="_blank" rel="noopener noreferrer">redis<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h1 id="初始redis"><a href="#初始redis" class="header-anchor">#</a> 初始Redis</h1> <h2 id="nosql"><a href="#nosql" class="header-anchor">#</a> NoSQL</h2> <table><thead><tr><th></th> <th>SQL关系型数据库</th> <th>NoSQL非关系型数据库</th></tr></thead> <tbody><tr><td>数据结构</td> <td>结构化（Structured）</td> <td>非结构化的<br>（键值类型（Redis）、文档类型（MongoDB）<br>、 列类型（HBase）、 Graph类型（Neo4j））</td></tr> <tr><td>数据关联</td> <td>关联的（Relational）</td> <td>无关联的</td></tr> <tr><td>查询方式</td> <td>SQL查询</td> <td>非SQL</td></tr> <tr><td>事务特性</td> <td>ACID</td> <td>BASE</td></tr></tbody></table> <h2 id="认识redis"><a href="#认识redis" class="header-anchor">#</a> 认识Redis</h2> <p><strong>Remote Dictionary Server</strong>，远程词典服务器，是一个基于内存的键值型NoSQL数据库</p> <ul><li>特征：
键值（key-value）型，value支持多种不同数据结构，功能丰富
单线程，每个命令具备原子性
低延迟，速度快（基于内存、IO多路复用、良好的编码）。
支持数据持久化
支持主从集群、分片集群
支持多语言客户端</li></ul> <h2 id="redis安装"><a href="#redis安装" class="header-anchor">#</a> Redis安装</h2> <p><a href="/cyanyep/Redis/Redis安装说明.html">Redis安装说明</a></p> <h1 id="redis常见命令"><a href="#redis常见命令" class="header-anchor">#</a> Redis常见命令</h1> <h2 id="redis数据结构介绍"><a href="#redis数据结构介绍" class="header-anchor">#</a> Redis数据结构介绍**</h2> <p>Redis是一个高性能的键值对（key-value）的数据库，key一般是String类型，不过value的类型多种多样：</p> <h3 id="基本类型"><a href="#基本类型" class="header-anchor">#</a> 基本类型</h3> <ol><li><strong>String</strong>：字符串类型，可以存储任何格式的文本数据。
<ul><li>示例：<code>hello world</code></li></ul></li> <li><strong>Hash</strong>：哈希表类型，用于存储键值对集合。
<ul><li>示例：<code>{name: &quot;Jack&quot;, age: 21}</code></li></ul></li> <li><strong>List</strong>：列表类型，用于存储有序的字符串列表。
<ul><li>示例：<code>[A -&gt; B -&gt; C -&gt; C]</code></li></ul></li> <li><strong>Set</strong>：集合类型，用于存储无序且不重复的字符串集合。
<ul><li>示例：<code>{A, B, C}</code></li></ul></li> <li><strong>SortedSet</strong>：有序集合类型，用于存储按分数排序的字符串集合。
<ul><li>示例：<code>{A: 1, B: 2, C: 3}</code></li></ul></li></ol> <h3 id="特殊类型"><a href="#特殊类型" class="header-anchor">#</a> 特殊类型</h3> <ol><li><strong>GEO</strong>：地理空间索引类型，用于存储地理位置信息。
<ul><li>示例：<code>{A: (120.3, 30.5)}</code></li></ul></li> <li><strong>BitMap</strong>：位图类型，用于高效地存储和操作二进制位。
<ul><li>示例：<code>0110110101110101011</code></li></ul></li> <li><strong>HyperLog</strong>：超对数日志类型，用于近似计算唯一元素的数量。
<ul><li>示例：<code>0110110101110101011</code></li></ul></li></ol> <p>Redis为了方便我们学习，将操作不同数据类型的命令也做了分组，在官网（ <a href="https://redis.io/commands" target="_blank" rel="noopener noreferrer">https://redis.io/commands <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>）可以查看到不同的命令</p> <p>或者通过<strong>help @XXX</strong></p> <p><img src="http://stofu80ry.sabkt.gdipper.com/picture/image-20250117180730695.png" alt="image-20250117180730695"></p> <h2 id="redis通用命令"><a href="#redis通用命令" class="header-anchor">#</a> Redis通用命令</h2> <ul><li>通用指令是部分数据类型的，都可以使用的指令，常见的有：
<ul><li>KEYS：查看符合模板的所有key，不建议在生产环境设备上使用，会消耗大量资源</li> <li>DEL：删除一个指定的key</li> <li>EXISTS：判断key是否存在</li> <li>EXPIRE：给一个key设置有效期，有效期到期时该key会被自动删除</li> <li>TTL	查看一个KEY的剩余有效期</li></ul></li></ul> <p>​	通过help [command] 可以查看一个命令的具体用法</p> <h2 id="string类型"><a href="#string类型" class="header-anchor">#</a> String类型</h2> <p>String类型，也就是字符串类型，是Redis中最简单的存储类型。</p> <p>其<strong>value</strong>是字符串，不过根据<strong>字符串的格式</strong>不同，又可以分为3类：</p> <ul><li>string：普通字符串</li> <li>int：整数类型，可以做自增、自减操作</li> <li>float：浮点类型，可以做自增、自减操作</li></ul> <p>不管是哪种格式，底层都是<strong>字节数组</strong>形式存储，只不过是编码方式不同。字符串类型的最大空间不能超过512m.</p> <h3 id="string的常见命令"><a href="#string的常见命令" class="header-anchor">#</a> String的常见命令**</h3> <ul><li>SET：添加或者修改已经存在的一个String类型的键值对</li> <li>GET：根据key获取String类型的value</li> <li>MSET：批量添加多个String类型的键值对</li> <li>MGET：根据多个key获取多个String类型的value</li> <li>INCR：让一个整型的key自增1</li> <li>INCRBY:让一个整型的key自增并指定步长，例如：incrby num 2 让num值自增2</li> <li>INCRBYFLOAT：让一个浮点类型的数字自增并指定步长</li> <li>SETNX：添加一个String类型的键值对，前提是这个key不存在，否则不执行</li> <li>SETEX：添加一个String类型的键值对，并且指定有效期</li></ul> <h3 id="key的结构"><a href="#key的结构" class="header-anchor">#</a> key的结构*</h3> <p>Redis的key允许有多个单词形成层级结构，多个单词之间用':'隔开，格式如下：</p> <ul><li>项目名:业务名:类型:id</li></ul> <p>这个格式并非固定，也可以根据自己的需求来删除或添加词条。</p> <p>例如我们的项目名称叫 heima，有user和product两种不同类型的数据，我们可以这样定义key：</p> <ul><li>user相关的key：heima:user:1</li> <li>uproduct相关的key：heima:product:1</li></ul> <p>如果Value是一个Java对象，例如一个User对象，则可以将对象序列化为JSON字符串后存储：</p> <table><thead><tr><th><strong>KEY</strong></th> <th><strong>VALUE</strong></th></tr></thead> <tbody><tr><td>heima:user:1</td> <td>{&quot;id&quot;:1,  &quot;name&quot;: &quot;Jack&quot;, &quot;age&quot;: 21}</td></tr> <tr><td>heima:product:1</td> <td>{&quot;id&quot;:1,  &quot;name&quot;: &quot;小米11&quot;, &quot;price&quot;: 4999}</td></tr></tbody></table> <h2 id="hash类型"><a href="#hash类型" class="header-anchor">#</a> Hash类型</h2> <p>Hash类型，也叫散列，其value是一个无序字典，类似于Java中的HashMap结构。</p> <p>String结构是将对象序列化为JSON字符串后存储，当需要<strong>修改对象某个字段时很不方便</strong>：</p> <p>Hash结构可以将对象中的每个字段独立存储，可以针对单个字段做CRUD：</p> <table style="border-collapse:collapse;margin:0 auto;text-align:center;"><tr><th rowspan="2">KEY</th> <th colspan="2">VALUE</th></tr> <tr><th>field</th> <th>value</th></tr> <tr><td rowspan="2" style="vertical-align:middle;">heima:user:1</td> <td>name</td> <td>Jack</td></tr> <tr><td>age</td> <td>21</td></tr> <tr><td rowspan="2" style="vertical-align:middle;">heima:user:2</td> <td>name</td> <td>Rose</td></tr> <tr><td>age</td> <td>18</td></tr></table> <h3 id="hash的常见命令"><a href="#hash的常见命令" class="header-anchor">#</a> Hash的常见命令**</h3> <ul><li>HSET key field value：添加或者修改hash类型key的field的值</li> <li>HGET key field：获取一个hash类型key的field的值</li> <li>HMSET：批量添加多个hash类型key的field的值</li> <li>HMGET：批量获取多个hash类型key的field的值</li> <li>HGETALL：获取一个hash类型的key中的所有的field和value</li> <li>HKEYS：获取一个hash类型的key中的所有的field</li> <li>HVALS：获取一个hash类型的key中的所有的value</li> <li>HINCRBY:让一个hash类型key的字段值自增并指定步长</li> <li>HSETNX：添加一个hash类型的key的field值，前提是这个field不存在，否则不执行</li></ul> <h2 id="list类型"><a href="#list类型" class="header-anchor">#</a> List类型</h2> <p>Redis中的List类型与Java中的LinkedList类似，可以看做是一个<strong>双向链表</strong>结构。既可以支持正向检索和也可以支持反向检索。</p> <p>特征也与LinkedList类似：</p> <ul><li><strong>有序</strong></li> <li><strong>元素可以重复</strong></li> <li><strong>插入和删除快</strong></li> <li><strong>查询速度一般</strong></li></ul> <p>常用来存储一个<strong>有序数据</strong>，例如：朋友圈点赞列表，评论列表等。</p> <h3 id="list的常见命令"><a href="#list的常见命令" class="header-anchor">#</a> List的常见命令**</h3> <ul><li>LPUSH key  element ... ：向列表左侧插入一个或多个元素</li> <li>LPOP key：移除并返回列表左侧的第一个元素，没有则返回nil</li> <li>RPUSH key  element ... ：向列表右侧插入一个或多个元素</li> <li>RPOP key：移除并返回列表右侧的第一个元素</li> <li>LRANGE key star end：<font color="red">返回一段角标范围内的所有元素</font></li> <li>BLPOP和BRPOP：与LPOP和RPOP类似，只不过在没有元素时等待指定时间，而不是直接返回nil</li></ul> <h2 id="set类型"><a href="#set类型" class="header-anchor">#</a> Set类型</h2> <p>Redis的Set结构与Java中的HashSet类似，可以看做是一个value为null的<strong>HashMap</strong>(例如：{A, B, C})。因为也是一个hash表，因此具备与HashSet类似的特征：</p> <ul><li>无序</li> <li>元素不可重复</li> <li>查找快</li> <li>支持交集、并集、差集等功能</li></ul> <h3 id="set类型的常见命令"><a href="#set类型的常见命令" class="header-anchor">#</a> Set类型的常见命令**</h3> <ul><li>SADD key member ... ：向set中添加一个或多个元素</li> <li>SREM key member ... : 移除set中的指定元素</li> <li>SCARD key： 返回set中元素的个数</li> <li>SISMEMBER key member：判断一个元素是否存在于set中</li> <li>SMEMBERS：获取set中的所有元素</li> <li>SINTER key1 key2 ... ：求key1与key2的交集</li> <li>SDIFF key1 key2 ... ：求key1与key2的差集</li> <li>SUNION key1 key2 ..：求key1和key2的并集</li></ul> <h2 id="sortedset类型"><a href="#sortedset类型" class="header-anchor">#</a> SortedSet类型</h2> <p>Redis的<strong>SortedSet</strong>是一个<strong>可排序的set集合</strong>，与Java中的TreeSet有些类似，但底层数据结构却差别很大。SortedSet中的<strong>每一个元素都带有一个score属性</strong>，可以基于score属性对元素排序，底层的实现是一个<strong>跳表（SkipList）加 hash表</strong>。</p> <p>SortedSet具备下列特性：</p> <ul><li>可排序</li> <li>元素不重复</li> <li>查询速度快</li></ul> <p>因为SortedSet的可排序特性，经常被用来实现<strong>排行榜</strong>这样的功能。</p> <h3 id="sortedset的常见命令"><a href="#sortedset的常见命令" class="header-anchor">#</a> SortedSet的常见命令</h3> <ul><li>ZADD key score member：添加一个或多个元素到sorted set ，如果已经存在则更新其score值</li> <li>ZREM key member：删除sorted set中的一个指定元素</li> <li>ZSCORE key member : 获取sorted set中的指定元素的score值</li> <li>ZRANK key member：获取sorted set 中的指定元素的排名</li> <li>ZCARD key：获取sorted set中的元素个数</li> <li>ZCOUNT key min max：统计score值在给定范围内的所有元素的个数</li> <li>ZINCRBY key increment member：让sorted set中的指定元素自增，步长为指定的increment值</li> <li>ZRANGE key min max：按照score排序后，获取指定排名范围内的元素</li> <li>ZRANGEBYSCORE key min max：按照score排序后，获取指定score范围内的元素</li> <li>ZDIFF、ZINTER、ZUNION：求差集、交集、并集</li></ul> <p>注意：所有的排名默认都是升序，如果要降序则在命令的Z后面添加REV即可</p> <h1 id="redis的java客户端"><a href="#redis的java客户端" class="header-anchor">#</a> Redis的Java客户端</h1> <p>在Redis官网中提供了各种语言的客户端，地址：https://redis.io/clients</p> <p>Redis 的 Java 客户端很多，常用的几种：</p> <ul><li>Jedis（Java redis）</li> <li>Lettuce</li> <li>Spring Data Redis</li></ul> <p>Spring 对 Redis 客户端进行了整合，提供了 Spring Data Redis，在Spring Boot项目中还提供了对应的Starter，即 spring-boot-starter-data-redis。</p> <p>我们重点学习<strong>Spring Data Redis</strong>。</p> <p><img src="http://stofu80ry.sabkt.gdipper.com/picture/image-20250117192048977.png" alt="image-20250117192048977"></p> <h2 id="jedis"><a href="#jedis" class="header-anchor">#</a> Jedis</h2> <p>Jedis的官网地址： https://github.com/redis/jedis，我们先来个快速入门：</p> <ol><li>引入依赖：（可以直接复制官网）</li></ol> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>redis.clients<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>jedis<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>5.2.0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><ol start="2"><li>建立连接</li></ol> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">private</span> <span class="token class-name">Jedis</span> jedis<span class="token punctuation">;</span>
<span class="token annotation punctuation">@BeforeEach</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setUp</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    jedis <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Jedis</span><span class="token punctuation">(</span><span class="token string">&quot;192.168.10.130&quot;</span><span class="token punctuation">,</span> <span class="token number">6379</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    jedis<span class="token punctuation">.</span><span class="token function">auth</span><span class="token punctuation">(</span><span class="token string">&quot;123456&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    jedis<span class="token punctuation">.</span><span class="token function">select</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><ol start="3"><li>测试string</li></ol> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@Test</span>
<span class="token keyword">void</span> <span class="token function">testString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">String</span> result <span class="token operator">=</span> jedis<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;张三&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;result = &quot;</span> <span class="token operator">+</span> result<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">String</span> name <span class="token operator">=</span> jedis<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;name = &quot;</span> <span class="token operator">+</span> name<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><ol start="4"><li>释放资源</li></ol> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@AfterEach</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">tearDown</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>jedis<span class="token operator">!=</span><span class="token keyword">null</span><span class="token punctuation">)</span>
    jedis<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="jedis连接池"><a href="#jedis连接池" class="header-anchor">#</a> Jedis连接池</h2> <p><strong>Jedis本身是线程不安全的</strong>，并且频繁的创建和销毁连接会有性能损耗，因此我们推荐大家使用<strong>Jedis连接池</strong>代替Jedis的直连方式。</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">JedisConnectionFactory</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">JedisPool</span> jedisPool<span class="token punctuation">;</span>
    <span class="token keyword">static</span> <span class="token punctuation">{</span>
        <span class="token class-name">JedisPoolConfig</span> jedisPoolConfig <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">JedisPoolConfig</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 最大连接</span>
        jedisPoolConfig<span class="token punctuation">.</span><span class="token function">setMaxTotal</span><span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 最大空闲连接</span>
         jedisPoolConfig<span class="token punctuation">.</span><span class="token function">setMaxIdle</span><span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 最小空闲连接</span>
         jedisPoolConfig<span class="token punctuation">.</span><span class="token function">setMinIdle</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 设置最长等待时间， ms</span>
        jedisPoolConfig<span class="token punctuation">.</span><span class="token function">setMaxWaitMillis</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        jedisPool <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">JedisPool</span><span class="token punctuation">(</span>jedisPoolConfig<span class="token punctuation">,</span> 
                <span class="token string">&quot;192.168.10.130&quot;</span><span class="token punctuation">,</span> <span class="token number">6379</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">,</span><span class="token string">&quot;123456&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">Jedis</span> <span class="token function">getJedis</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> jedisPool<span class="token punctuation">.</span><span class="token function">getResource</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="springdataredis-导入"><a href="#springdataredis-导入" class="header-anchor">#</a> SpringDataRedis**(导入)</h2> <p>SpringData是Spring中数据操作的模块，包含对各种数据库的集成，其中对Redis的集成模块就叫做<strong>SpringDataRedis</strong>，官网地址：https://spring.io/projects/spring-data-redis</p> <ul><li><p>提供了对不同Redis客户端的整合（Lettuce和Jedis）</p></li> <li><p>提供了RedisTemplate统一API来操作Redis</p></li> <li><p>支持Redis的发布订阅模型</p></li> <li><p>支持Redis哨兵和Redis集群</p></li> <li><p>支持基于Lettuce的响应式编程</p></li> <li><p>支持基于JDK、JSON、字符串、Spring对象的数据序列化及反序列化</p></li> <li><p>支持基于Redis的JDKCollection实现</p></li></ul> <p>SpringDataRedis中提供了RedisTemplate工具类，其中封装了各种<strong>对Redis的操作</strong>。并且将不同数据类型的操作API封装到了不同的类型中：</p> <table><thead><tr><th><strong>API</strong></th> <th><strong>返回值类型</strong></th> <th><strong>说明</strong></th></tr></thead> <tbody><tr><td><strong>redisTemplate</strong>.opsForValue()</td> <td>ValueOperations</td> <td>操作String类型数据</td></tr> <tr><td><strong>redisTemplate</strong>.opsForHash()</td> <td>HashOperations</td> <td>操作Hash类型数据</td></tr> <tr><td><strong>redisTemplate</strong>.opsForList()</td> <td>ListOperations</td> <td>操作List类型数据</td></tr> <tr><td><strong>redisTemplate</strong>.opsForSet()</td> <td>SetOperations</td> <td>操作Set类型数据</td></tr> <tr><td><strong>redisTemplate</strong>.opsForZSet()</td> <td>ZSetOperations</td> <td>操作SortedSet类型数据</td></tr> <tr><td><strong>redisTemplate</strong></td> <td></td> <td>通用的命令</td></tr></tbody></table> <p>SpringBoot已经提供了对SpringDataRedis的支持，使用非常简单：</p> <ol><li>引入依赖</li></ol> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token comment">&lt;!--Redis依赖--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-data-redis<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
<span class="token comment">&lt;!--连接池依赖--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.apache.commons<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>commons-pool2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.projectlombok<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>lombok<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>optional</span><span class="token punctuation">&gt;</span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>optional</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><ol start="2"><li>配置文件</li></ol> <div class="language-yml extra-class"><pre class="language-yml"><code><span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token key atrule">application</span><span class="token punctuation">:</span>
    <span class="token key atrule">name</span><span class="token punctuation">:</span> spring<span class="token punctuation">-</span>data<span class="token punctuation">-</span>reids
  <span class="token key atrule">data</span><span class="token punctuation">:</span>
    <span class="token key atrule">redis</span><span class="token punctuation">:</span>
      <span class="token key atrule">host</span><span class="token punctuation">:</span> 192.168.10.130
      <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">6379</span>
      <span class="token key atrule">password</span><span class="token punctuation">:</span> <span class="token number">123456</span>
      <span class="token key atrule">lettuce</span><span class="token punctuation">:</span>
        <span class="token key atrule">pool</span><span class="token punctuation">:</span>
          <span class="token key atrule">max-active</span><span class="token punctuation">:</span> <span class="token number">8</span>
          <span class="token key atrule">max-idle</span><span class="token punctuation">:</span> <span class="token number">8</span>
          <span class="token key atrule">min-idle</span><span class="token punctuation">:</span> <span class="token number">0</span>
          <span class="token key atrule">max-wait</span><span class="token punctuation">:</span> 1000ms
</code></pre></div><ol start="3"><li>注入RedisTemplate</li></ol> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@Autowired</span>
<span class="token keyword">private</span> <span class="token class-name">RedisTemplate</span> redisTemplate<span class="token punctuation">;</span>
</code></pre></div><ol start="4"><li>编写测试</li></ol> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@Test</span>
<span class="token keyword">void</span> <span class="token function">testString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    redisTemplate<span class="token punctuation">.</span><span class="token function">opsForValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;cyan&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">Object</span> name <span class="token operator">=</span> redisTemplate<span class="token punctuation">.</span><span class="token function">opsForValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;name1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;name = &quot;</span> <span class="token operator">+</span> name<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="springdataredis的序列化方式"><a href="#springdataredis的序列化方式" class="header-anchor">#</a> SpringDataRedis的序列化方式*</h2> <p>RedisTemplate可以接收任意Object作为值写入Redis，只不过写入前会把Object序列化为字节形式，默认是采用<strong>JDK序列化</strong>，得到的结果是这样的：</p> <p>key: \xAC\xED\x00\x05t\x00\x04name</p> <p>value: \xAC\xED\x00\x05t\x00\x04cyan</p> <p>缺点：</p> <p>​	可读性差</p> <p>​	内存占用较大</p> <p>我们可以在RedisConfig配置类中<strong>自定义RedisTemplate</strong>的序列化方式，代码如下：</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@Bean</span>
<span class="token keyword">public</span> <span class="token class-name">RedisTemplate</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> <span class="token function">redisTemplate</span><span class="token punctuation">(</span><span class="token class-name">RedisConnectionFactory</span> redisConnectionFactory<span class="token punctuation">)</span>
        <span class="token keyword">throws</span> <span class="token class-name">UnknownHostException</span> <span class="token punctuation">{</span>
    <span class="token comment">// 创建Template</span>
    <span class="token class-name">RedisTemplate</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> redisTemplate<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">RedisTemplate</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 设置连接工厂</span>
    redisTemplate<span class="token punctuation">.</span><span class="token function">setConnectionFactory</span><span class="token punctuation">(</span>redisConnectionFactory<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 设置序列化工具</span>
    <span class="token class-name">GenericJackson2JsonRedisSerializer</span> jsonRedisSerializer<span class="token operator">=</span>

            <span class="token keyword">new</span> <span class="token class-name">GenericJackson2JsonRedisSerializer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// key和 hashKey采用 string序列化</span>
    redisTemplate<span class="token punctuation">.</span><span class="token function">setKeySerializer</span><span class="token punctuation">(</span><span class="token class-name">RedisSerializer</span><span class="token punctuation">.</span><span class="token function">string</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    redisTemplate<span class="token punctuation">.</span><span class="token function">setHashKeySerializer</span><span class="token punctuation">(</span><span class="token class-name">RedisSerializer</span><span class="token punctuation">.</span><span class="token function">string</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// value和 hashValue采用 JSON序列化</span>
    redisTemplate<span class="token punctuation">.</span><span class="token function">setValueSerializer</span><span class="token punctuation">(</span>jsonRedisSerializer<span class="token punctuation">)</span><span class="token punctuation">;</span>
    redisTemplate<span class="token punctuation">.</span><span class="token function">setHashValueSerializer</span><span class="token punctuation">(</span>jsonRedisSerializer<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> redisTemplate<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>运行时会报错是因为没有导入Jackson依赖（格式json数据），（SpringMVC会自动引入）</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.fasterxml.jackson.core<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>jackson-databind<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>尽管JSON的序列化方式可以满足我们的需求，但依然存在一些问题，当value为对象时，如下：</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;@class&quot;</span><span class="token operator">:</span> <span class="token string">&quot;com.cyan.springdatareids.pojo.User&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;cyan&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;age&quot;</span><span class="token operator">:</span> <span class="token number">18</span>
<span class="token punctuation">}</span>
</code></pre></div><p>为了在反序列化时知道对象的类型，<strong>JSON序列化器会将类的class类型写入json结果中</strong>，存入Redis，会带来额外的内存开销。x</p> <h2 id="stringredistemplate"><a href="#stringredistemplate" class="header-anchor">#</a> StringRedisTemplate**</h2> <p>为了<strong>节省内存空间</strong>，我们并不会使用JSON序列化器来处理value，而是统一使用String序列化器，<strong>要求只能存储String类型的key和value</strong>。</p> <p>当需要存储<strong>Java对象</strong>时，<strong>手动完成对象的序列化和反序列化</strong>。</p> <p><img src="http://stofu80ry.sabkt.gdipper.com/picture/image-20250118234940165.png" alt="image-20250118234940165"></p> <p>Spring默认提供了一个<strong>StringRedisTemplate</strong>类，它的key和value的序列化方式默认就是String方式。省去了我们自定义RedisTemplate的过程：</p> <p>手动序列化对象用<strong>ObjectMapper</strong></p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">ObjectMapper</span> mapper <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ObjectMapper</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token annotation punctuation">@Test</span>
<span class="token keyword">void</span> <span class="token function">testUser</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">JsonProcessingException</span> <span class="token punctuation">{</span>
    <span class="token comment">// 准备对象</span>
    <span class="token class-name">User</span> user <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span><span class="token string">&quot;cyan&quot;</span><span class="token punctuation">,</span> <span class="token number">18</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 手动序列化</span>
    <span class="token class-name">String</span> json <span class="token operator">=</span> mapper<span class="token punctuation">.</span><span class="token function">writeValueAsString</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 写入一条数据到redis</span>
    stringRedisTemplate<span class="token punctuation">.</span><span class="token function">opsForValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">&quot;user:200&quot;</span><span class="token punctuation">,</span> json<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 读取数据</span>
    <span class="token class-name">String</span> jsonUser <span class="token operator">=</span> stringRedisTemplate<span class="token punctuation">.</span><span class="token function">opsForValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;user:200&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 反序列化</span>
    <span class="token class-name">User</span> user1 <span class="token operator">=</span> mapper<span class="token punctuation">.</span><span class="token function">readValue</span><span class="token punctuation">(</span>jsonUser<span class="token punctuation">,</span> <span class="token class-name">User</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;user1 = &quot;</span> <span class="token operator">+</span> user1<span class="token punctuation">)</span><span class="token punctuation">;</span>
    
<span class="token punctuation">}</span>
</code></pre></div><h2 id="redistemplate的两种序列化实践方案"><a href="#redistemplate的两种序列化实践方案" class="header-anchor">#</a> RedisTemplate的两种序列化实践方案：</h2> <p>方案一：</p> <ol><li><p>自定义RedisTemplate</p></li> <li><p>修改RedisTemplate的序列化器为GenericJackson2JsonRedisSerializer</p></li></ol> <p>方案二：</p> <ol><li><p>使用StringRedisTemplate</p></li> <li><p>写入Redis时，手动把对象序列化为JSON</p></li> <li><p>读取Redis时，手动把读取到的JSON反序列化为对象</p></li></ol> <h2 id="操作常见类型数据"><a href="#操作常见类型数据" class="header-anchor">#</a> 操作常见类型数据</h2> <p><strong>1). 操作字符串类型数据</strong></p> <div class="language-java extra-class"><pre class="language-java"><code>	<span class="token comment">/**
     * 操作字符串类型的数据
     */</span>
    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token comment">// set get setex setnx</span>
        redisTemplate<span class="token punctuation">.</span><span class="token function">opsForValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;小明&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> city <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">)</span> redisTemplate<span class="token punctuation">.</span><span class="token function">opsForValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>city<span class="token punctuation">)</span><span class="token punctuation">;</span>
        redisTemplate<span class="token punctuation">.</span><span class="token function">opsForValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">&quot;code&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;1234&quot;</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token class-name">TimeUnit</span><span class="token punctuation">.</span><span class="token constant">MINUTES</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        redisTemplate<span class="token punctuation">.</span><span class="token function">opsForValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setIfAbsent</span><span class="token punctuation">(</span><span class="token string">&quot;lock&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        redisTemplate<span class="token punctuation">.</span><span class="token function">opsForValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setIfAbsent</span><span class="token punctuation">(</span><span class="token string">&quot;lock&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;2&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre></div><p><strong>2). 操作哈希类型数据</strong></p> <div class="language-java extra-class"><pre class="language-java"><code>	<span class="token comment">/**
     * 操作哈希类型的数据
     */</span>
    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testHash</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token comment">//hset hget hdel hkeys hvals</span>
        <span class="token class-name">HashOperations</span> hashOperations <span class="token operator">=</span> redisTemplate<span class="token punctuation">.</span><span class="token function">opsForHash</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        hashOperations<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;100&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;tom&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        hashOperations<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;100&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;age&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;20&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">String</span> name <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">)</span> hashOperations<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;100&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;name&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">Set</span> keys <span class="token operator">=</span> hashOperations<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span><span class="token string">&quot;100&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>keys<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">List</span> values <span class="token operator">=</span> hashOperations<span class="token punctuation">.</span><span class="token function">values</span><span class="token punctuation">(</span><span class="token string">&quot;100&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>values<span class="token punctuation">)</span><span class="token punctuation">;</span>

        hashOperations<span class="token punctuation">.</span><span class="token function">delete</span><span class="token punctuation">(</span><span class="token string">&quot;100&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;age&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre></div><p><strong>3). 操作列表类型数据</strong></p> <div class="language-java extra-class"><pre class="language-java"><code>	<span class="token comment">/**
     * 操作列表类型的数据
     */</span>
    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token comment">//lpush lrange rpop llen</span>
        <span class="token class-name">ListOperations</span> listOperations <span class="token operator">=</span> redisTemplate<span class="token punctuation">.</span><span class="token function">opsForList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        listOperations<span class="token punctuation">.</span><span class="token function">leftPushAll</span><span class="token punctuation">(</span><span class="token string">&quot;mylist&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;a&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;b&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;c&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        listOperations<span class="token punctuation">.</span><span class="token function">leftPush</span><span class="token punctuation">(</span><span class="token string">&quot;mylist&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;d&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">List</span> mylist <span class="token operator">=</span> listOperations<span class="token punctuation">.</span><span class="token function">range</span><span class="token punctuation">(</span><span class="token string">&quot;mylist&quot;</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>mylist<span class="token punctuation">)</span><span class="token punctuation">;</span>

        listOperations<span class="token punctuation">.</span><span class="token function">rightPop</span><span class="token punctuation">(</span><span class="token string">&quot;mylist&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">Long</span> size <span class="token operator">=</span> listOperations<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token string">&quot;mylist&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>size<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre></div><p><strong>4). 操作集合类型数据</strong></p> <div class="language-java extra-class"><pre class="language-java"><code>	<span class="token comment">/**
     * 操作集合类型的数据
     */</span>
    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testSet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token comment">//sadd smembers scard sinter sunion srem</span>
        <span class="token class-name">SetOperations</span> setOperations <span class="token operator">=</span> redisTemplate<span class="token punctuation">.</span><span class="token function">opsForSet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        setOperations<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">&quot;set1&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;a&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;b&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;c&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;d&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        setOperations<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">&quot;set2&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;a&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;b&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;x&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;y&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">Set</span> members <span class="token operator">=</span> setOperations<span class="token punctuation">.</span><span class="token function">members</span><span class="token punctuation">(</span><span class="token string">&quot;set1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>members<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">Long</span> size <span class="token operator">=</span> setOperations<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token string">&quot;set1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>size<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">Set</span> intersect <span class="token operator">=</span> setOperations<span class="token punctuation">.</span><span class="token function">intersect</span><span class="token punctuation">(</span><span class="token string">&quot;set1&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;set2&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>intersect<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">Set</span> union <span class="token operator">=</span> setOperations<span class="token punctuation">.</span><span class="token function">union</span><span class="token punctuation">(</span><span class="token string">&quot;set1&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;set2&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>union<span class="token punctuation">)</span><span class="token punctuation">;</span>

        setOperations<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token string">&quot;set1&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;a&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;b&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre></div><p><strong>5). 操作有序集合类型数据</strong></p> <div class="language-java extra-class"><pre class="language-java"><code>	<span class="token comment">/**
     * 操作有序集合类型的数据
     */</span>
    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testZset</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token comment">//zadd zrange zincrby zrem</span>
        <span class="token class-name">ZSetOperations</span> zSetOperations <span class="token operator">=</span> redisTemplate<span class="token punctuation">.</span><span class="token function">opsForZSet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        zSetOperations<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">&quot;zset1&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;a&quot;</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        zSetOperations<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">&quot;zset1&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;b&quot;</span><span class="token punctuation">,</span><span class="token number">12</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        zSetOperations<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">&quot;zset1&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;c&quot;</span><span class="token punctuation">,</span><span class="token number">9</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">Set</span> zset1 <span class="token operator">=</span> zSetOperations<span class="token punctuation">.</span><span class="token function">range</span><span class="token punctuation">(</span><span class="token string">&quot;zset1&quot;</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>zset1<span class="token punctuation">)</span><span class="token punctuation">;</span>

        zSetOperations<span class="token punctuation">.</span><span class="token function">incrementScore</span><span class="token punctuation">(</span><span class="token string">&quot;zset1&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;c&quot;</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        zSetOperations<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token string">&quot;zset1&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;a&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;b&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre></div><p><strong>6). 通用命令操作</strong></p> <div class="language-java extra-class"><pre class="language-java"><code>	<span class="token comment">/**
     * 通用命令操作
     */</span>
    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testCommon</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token comment">//keys exists type del</span>
        <span class="token class-name">Set</span> keys <span class="token operator">=</span> redisTemplate<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span><span class="token string">&quot;*&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>keys<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">Boolean</span> name <span class="token operator">=</span> redisTemplate<span class="token punctuation">.</span><span class="token function">hasKey</span><span class="token punctuation">(</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Boolean</span> set1 <span class="token operator">=</span> redisTemplate<span class="token punctuation">.</span><span class="token function">hasKey</span><span class="token punctuation">(</span><span class="token string">&quot;set1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Object</span> key <span class="token operator">:</span> keys<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">DataType</span> type <span class="token operator">=</span> redisTemplate<span class="token punctuation">.</span><span class="token function">type</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>type<span class="token punctuation">.</span><span class="token function">name</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        redisTemplate<span class="token punctuation">.</span><span class="token function">delete</span><span class="token punctuation">(</span><span class="token string">&quot;mylist&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre></div><h1 id=""><a href="#" class="header-anchor">#</a></h1></div></section> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev"><a href="/cyanyep/SpringBoot/Spring注解.html" class="prev">
          Spring注解
        </a></span> <span class="next"><a href="/cyanyep/Redis/Redis安装说明.html">
          Redis安装说明
        </a></span></p></div> <div class="comments-wrapper"><!----></div></main></div> <!----></div> <ul class="sub-sidebar sub-sidebar-wrapper" style="width:12rem;" data-v-b57cc07c data-v-7dd95ae2><li class="level-2" data-v-b57cc07c><a href="/cyanyep/Redis/Redis%E5%9F%BA%E7%A1%80.html#nosql" class="sidebar-link reco-side-nosql" data-v-b57cc07c>NoSQL</a></li><li class="level-2" data-v-b57cc07c><a href="/cyanyep/Redis/Redis%E5%9F%BA%E7%A1%80.html#认识redis" class="sidebar-link reco-side-认识redis" data-v-b57cc07c>认识Redis</a></li><li class="level-2" data-v-b57cc07c><a href="/cyanyep/Redis/Redis%E5%9F%BA%E7%A1%80.html#redis安装" class="sidebar-link reco-side-redis安装" data-v-b57cc07c>Redis安装</a></li><li class="level-2" data-v-b57cc07c><a href="/cyanyep/Redis/Redis%E5%9F%BA%E7%A1%80.html#redis数据结构介绍" class="sidebar-link reco-side-redis数据结构介绍" data-v-b57cc07c>Redis数据结构介绍**</a></li><li class="level-3" data-v-b57cc07c><a href="/cyanyep/Redis/Redis%E5%9F%BA%E7%A1%80.html#基本类型" class="sidebar-link reco-side-基本类型" data-v-b57cc07c>基本类型</a></li><li class="level-3" data-v-b57cc07c><a href="/cyanyep/Redis/Redis%E5%9F%BA%E7%A1%80.html#特殊类型" class="sidebar-link reco-side-特殊类型" data-v-b57cc07c>特殊类型</a></li><li class="level-2" data-v-b57cc07c><a href="/cyanyep/Redis/Redis%E5%9F%BA%E7%A1%80.html#redis通用命令" class="sidebar-link reco-side-redis通用命令" data-v-b57cc07c>Redis通用命令</a></li><li class="level-2" data-v-b57cc07c><a href="/cyanyep/Redis/Redis%E5%9F%BA%E7%A1%80.html#string类型" class="sidebar-link reco-side-string类型" data-v-b57cc07c>String类型</a></li><li class="level-3" data-v-b57cc07c><a href="/cyanyep/Redis/Redis%E5%9F%BA%E7%A1%80.html#string的常见命令" class="sidebar-link reco-side-string的常见命令" data-v-b57cc07c>String的常见命令**</a></li><li class="level-3" data-v-b57cc07c><a href="/cyanyep/Redis/Redis%E5%9F%BA%E7%A1%80.html#key的结构" class="sidebar-link reco-side-key的结构" data-v-b57cc07c>key的结构*</a></li><li class="level-2" data-v-b57cc07c><a href="/cyanyep/Redis/Redis%E5%9F%BA%E7%A1%80.html#hash类型" class="sidebar-link reco-side-hash类型" data-v-b57cc07c>Hash类型</a></li><li class="level-3" data-v-b57cc07c><a href="/cyanyep/Redis/Redis%E5%9F%BA%E7%A1%80.html#hash的常见命令" class="sidebar-link reco-side-hash的常见命令" data-v-b57cc07c>Hash的常见命令**</a></li><li class="level-2" data-v-b57cc07c><a href="/cyanyep/Redis/Redis%E5%9F%BA%E7%A1%80.html#list类型" class="sidebar-link reco-side-list类型" data-v-b57cc07c>List类型</a></li><li class="level-3" data-v-b57cc07c><a href="/cyanyep/Redis/Redis%E5%9F%BA%E7%A1%80.html#list的常见命令" class="sidebar-link reco-side-list的常见命令" data-v-b57cc07c>List的常见命令**</a></li><li class="level-2" data-v-b57cc07c><a href="/cyanyep/Redis/Redis%E5%9F%BA%E7%A1%80.html#set类型" class="sidebar-link reco-side-set类型" data-v-b57cc07c>Set类型</a></li><li class="level-3" data-v-b57cc07c><a href="/cyanyep/Redis/Redis%E5%9F%BA%E7%A1%80.html#set类型的常见命令" class="sidebar-link reco-side-set类型的常见命令" data-v-b57cc07c>Set类型的常见命令**</a></li><li class="level-2" data-v-b57cc07c><a href="/cyanyep/Redis/Redis%E5%9F%BA%E7%A1%80.html#sortedset类型" class="sidebar-link reco-side-sortedset类型" data-v-b57cc07c>SortedSet类型</a></li><li class="level-3" data-v-b57cc07c><a href="/cyanyep/Redis/Redis%E5%9F%BA%E7%A1%80.html#sortedset的常见命令" class="sidebar-link reco-side-sortedset的常见命令" data-v-b57cc07c>SortedSet的常见命令</a></li><li class="level-2" data-v-b57cc07c><a href="/cyanyep/Redis/Redis%E5%9F%BA%E7%A1%80.html#jedis" class="sidebar-link reco-side-jedis" data-v-b57cc07c>Jedis</a></li><li class="level-2" data-v-b57cc07c><a href="/cyanyep/Redis/Redis%E5%9F%BA%E7%A1%80.html#jedis连接池" class="sidebar-link reco-side-jedis连接池" data-v-b57cc07c>Jedis连接池</a></li><li class="level-2" data-v-b57cc07c><a href="/cyanyep/Redis/Redis%E5%9F%BA%E7%A1%80.html#springdataredis-导入" class="sidebar-link reco-side-springdataredis-导入" data-v-b57cc07c>SpringDataRedis**(导入)</a></li><li class="level-2" data-v-b57cc07c><a href="/cyanyep/Redis/Redis%E5%9F%BA%E7%A1%80.html#springdataredis的序列化方式" class="sidebar-link reco-side-springdataredis的序列化方式" data-v-b57cc07c>SpringDataRedis的序列化方式*</a></li><li class="level-2" data-v-b57cc07c><a href="/cyanyep/Redis/Redis%E5%9F%BA%E7%A1%80.html#stringredistemplate" class="sidebar-link reco-side-stringredistemplate" data-v-b57cc07c>StringRedisTemplate**</a></li><li class="level-2" data-v-b57cc07c><a href="/cyanyep/Redis/Redis%E5%9F%BA%E7%A1%80.html#redistemplate的两种序列化实践方案" class="sidebar-link reco-side-redistemplate的两种序列化实践方案" data-v-b57cc07c>RedisTemplate的两种序列化实践方案：</a></li><li class="level-2" data-v-b57cc07c><a href="/cyanyep/Redis/Redis%E5%9F%BA%E7%A1%80.html#操作常见类型数据" class="sidebar-link reco-side-操作常见类型数据" data-v-b57cc07c>操作常见类型数据</a></li></ul></div></div></div><div class="global-ui"><div class="back-to-ceiling" style="right:1rem;bottom:6rem;width:2.5rem;height:2.5rem;border-radius:.25rem;line-height:2.5rem;display:none;" data-v-c6073ba8 data-v-c6073ba8><svg t="1574745035067" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5404" class="icon" data-v-c6073ba8><path d="M526.60727968 10.90185116a27.675 27.675 0 0 0-29.21455937 0c-131.36607665 82.28402758-218.69155461 228.01873535-218.69155402 394.07834331a462.20625001 462.20625001 0 0 0 5.36959153 69.94390903c1.00431239 6.55289093-0.34802892 13.13561351-3.76865779 18.80351572-32.63518765 54.11355614-51.75690182 118.55860487-51.7569018 187.94566865a371.06718723 371.06718723 0 0 0 11.50484808 91.98906777c6.53300375 25.50556257 41.68394495 28.14064038 52.69160883 4.22606766 17.37162448-37.73630017 42.14135425-72.50938081 72.80769204-103.21549295 2.18761121 3.04276886 4.15646224 6.24463696 6.40373557 9.22774369a1871.4375 1871.4375 0 0 0 140.04691725 5.34970492 1866.36093723 1866.36093723 0 0 0 140.04691723-5.34970492c2.24727335-2.98310674 4.21612437-6.18497483 6.3937923-9.2178004 30.66633723 30.70611158 55.4360664 65.4791928 72.80769147 103.21549355 11.00766384 23.91457269 46.15860503 21.27949489 52.69160879-4.22606768a371.15156223 371.15156223 0 0 0 11.514792-91.99901164c0-69.36717486-19.13165746-133.82216804-51.75690182-187.92578088-3.42062944-5.66790279-4.76302748-12.26056868-3.76865837-18.80351632a462.20625001 462.20625001 0 0 0 5.36959269-69.943909c-0.00994388-166.08943902-87.32547796-311.81420293-218.6915546-394.09823051zM605.93803103 357.87693858a93.93749974 93.93749974 0 1 1-187.89594924 6.1e-7 93.93749974 93.93749974 0 0 1 187.89594924-6.1e-7z" p-id="5405" data-v-c6073ba8></path><path d="M429.50777625 765.63860547C429.50777625 803.39355007 466.44236686 1000.39046097 512.00932183 1000.39046097c45.56695499 0 82.4922232-197.00623328 82.5015456-234.7518555 0-37.75494459-36.9345906-68.35043303-82.4922232-68.34111062-45.57627738-0.00932239-82.52019037 30.59548842-82.51086798 68.34111062z" p-id="5406" data-v-c6073ba8></path></svg></div></div></div>
    <script src="/cyanyep/assets/js/app.3f4a4534.js" defer></script><script src="/cyanyep/assets/js/7.0ede3646.js" defer></script><script src="/cyanyep/assets/js/2.c489c8f7.js" defer></script><script src="/cyanyep/assets/js/1.79976f4a.js" defer></script><script src="/cyanyep/assets/js/69.d446987b.js" defer></script>
  </body>
</html>
